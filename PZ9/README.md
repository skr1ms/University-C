# Практическая работа 9

## Цель
Освоить работу с перенаправлением потоков ввода-вывода.

## Задание

Разработать три приложения, которые последовательно работают с файлом вывода предыдущего приложения:

1. **Первое приложение** - копирует из файла строки, которые начинаются с подстроки "03.05.2024"
2. **Второе приложение** - добавляет к каждой строке количество слов в строке
3. **Третье приложение** - считает количество цифр в файле (одно число может состоять из нескольких цифр), и выводит его в консоль

Запустить их последовательно из командной строки.

## Структура потоков ввода-вывода приложения

В момент запуска процесса ему выделяются стандартные потоки для ввода и вывода информации:
- **0, stdin** — стандартный поток ввода
- **1, stdout** — стандартный поток вывода
- **2, stderr** — стандартный поток вывода сообщений об ошибках

Процесс, инициирующий запуск другого процесса, определяет на какие файловые дескрипторы будут переданы работающему процессу.

Процесс во время своей работы может самостоятельно изменить направление потоков, однако эта возможность используется в основном управляющими процессами (например интерпретатором Bash).

## Потоки ввода-вывода в эмуляторе терминала

Эмулятор терминала общается с пользователем только по двум каналам:
- Ввод данных с помощью клавиатуры (буфера обмена)
- Вывод текстовых (и псевдографических) данных на экран терминала

Если специальных действий не было предпринято, тогда:
- Поток событий с клавиатуры передаётся на стандартный поток ввода
- Содержимое потоков stdout и stderr выводится на экран в истории

С точки зрения пользователя потоки stdout и stderr выводятся как результат работы приложения, ничем не отличимые друг от друга.

Если данные с потоков приходят одновременно, то возможно их пересечение, обычно происходит путём чередования строк.

## Вопросы

1. Какие существуют стандартные потоки ввода-вывода?
2. Какие есть способы передачи данных из одной программы в другую?
3. Для чего нужен и что из себя представляет эмулятор терминала?
4. Что такое труба в управлении потоками ввода-вывода?

## Использование

### Компиляция и запуск

```bash
make        # Компилирует и запускает все программы последовательно
make run    # Запускает программы через файлы
make run-pipes  # Запускает программы через пайпы
make clean  # Удаляет скомпилированные файлы и временные данные
```

### Структура файлов

- `filter_date.c` - фильтрует строки по дате "03.05.2024"
- `add_word_count.c` - добавляет количество слов к каждой строке
- `count_digits.c` - считает количество цифр в файле
- `input.txt` - входной файл с данными

## Ответы на вопросы

### 1. Какие существуют стандартные потоки ввода-вывода?

Существуют три стандартных потока ввода-вывода:
- **stdin (0)** - стандартный поток ввода, по умолчанию связан с клавиатурой
- **stdout (1)** - стандартный поток вывода, по умолчанию выводится на экран терминала
- **stderr (2)** - стандартный поток вывода сообщений об ошибках, также по умолчанию выводится на экран

### 2. Какие есть способы передачи данных из одной программы в другую?

Существуют следующие способы передачи данных между программами:

1. **Перенаправление через файлы** - одна программа записывает данные в файл, другая читает из него:
   ```bash
   program1 > output.txt
   program2 < output.txt
   ```

2. **Пайпы (pipes)** - прямое соединение stdout одной программы с stdin другой:
   ```bash
   program1 | program2 | program3
   ```

3. **Именованные пайпы (named pipes/FIFO)** - создание специального файла для передачи данных между процессами

4. **Сокеты** - для межпроцессного взаимодействия через сеть или локально

### 3. Для чего нужен и что из себя представляет эмулятор терминала?

Эмулятор терминала - это программа, которая обеспечивает интерфейс между пользователем и операционной системой. Он нужен для:

- Ввода команд с клавиатуры
- Отображения текстового вывода программ
- Управления процессами и запуска программ

Эмулятор терминала общается с пользователем по двум каналам:
- Ввод данных с клавиатуры (или буфера обмена) → передается на stdin
- Вывод текстовых данных на экран ← получает из stdout и stderr

С точки зрения пользователя потоки stdout и stderr неотличимы и выводятся вместе в истории терминала.

### 4. Что такое труба в управлении потоками ввода-вывода?

Труба (pipe) - это механизм межпроцессного взаимодействия, который напрямую соединяет стандартный поток вывода (stdout) одной программы со стандартным потоком ввода (stdin) другой программы без использования промежуточных файлов.

Трубы позволяют:
- Эффективно передавать данные между программами в реальном времени
- Обрабатывать данные последовательно (конвейерная обработка)
- Не создавать временные файлы для передачи данных

Пример использования: `program1 | program2 | program3` - данные передаются от program1 через program2 к program3.

